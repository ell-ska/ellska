/* eslint-disable @next/next/no-img-element */
/* eslint-disable jsx-a11y/alt-text */

import { ImageResponse } from 'next/og'
import {
  getOutfitRegularFont,
  getOutfitBoldFont,
} from '@/lib/og/get-outfit-font'
import { getOgProject } from '@/sanity/routes'
import { urlForImage } from '@/sanity/lib/image'
import formatHexColor from '@/utils/formatHexColor'

export const runtime = 'edge'

export default async function Image({
  params: { slug },
}: {
  params: { slug: string }
}) {
  const { name, accent_color, phone_images } = await getOgProject(slug)

  return new ImageResponse(
    (
      <div
        style={{
          display: 'flex',
          flexDirection: 'column',
          height: '100%',
          width: '100%',
          backgroundColor: 'white',
          color: '#111827',
          fontFamily: 'outfit',
        }}
      >
        <div
          style={{
            display: 'flex',
            overflow: 'hidden',
            gap: '0.5rem',
            flexShrink: 1,
            padding: '0 0.5rem',
            backgroundColor: formatHexColor(accent_color),
          }}
        >
          {phone_images.secondary && (
            <img
              src={urlForImage(phone_images.secondary).url()}
              style={{
                padding: '1rem',
                objectFit: 'contain',
                flexGrow: 1,
                flexShrink: 1,
                flexBasis: '0%',
              }}
            />
          )}
          <img
            src={urlForImage(phone_images.main).url()}
            style={{
              padding: '1rem',
              objectFit: 'contain',
              flexGrow: 1,
              flexShrink: 1,
              flexBasis: '0%',
            }}
          />
          {phone_images.third && (
            <img
              src={urlForImage(phone_images.third).url()}
              style={{
                padding: '1rem',
                objectFit: 'contain',
                flexGrow: 1,
                flexShrink: 1,
                flexBasis: '0%',
              }}
            />
          )}
        </div>
        <div
          style={{
            display: 'flex',
            flexShrink: 0,
            justifyContent: 'space-between',
            alignItems: 'center',
            padding: '1rem 2rem',
          }}
        >
          <div
            style={{
              fontSize: '2rem',
              fontWeight: 700,
            }}
          >
            {name}
          </div>
          <svg
            width='113'
            height='48'
            viewBox='0 0 113 48'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              d='M60.4574 18.9738C61.0101 19.0007 61.4819 18.5315 61.5608 18.0065C61.582 17.9296 61.5993 17.8488 61.609 17.7661C61.8612 15.6873 61.8169 13.6008 61.5242 11.5278C61.3817 10.5125 61.1737 9.50863 60.8868 8.52404C60.6153 7.59137 60.3206 6.47409 59.7622 5.67026C59.2037 4.87028 58.212 4.1626 57.2549 3.93761C56.0994 3.66838 54.9652 4.10875 54.0851 4.84527C52.5907 6.09909 51.728 8.14521 51.2851 9.99517C51.0271 11.0721 50.8884 12.1836 50.8191 13.2874C50.7401 14.5316 50.8172 15.7739 50.7844 17.0181C50.7825 17.0969 50.7902 17.17 50.7998 17.2412C50.7921 17.2912 50.7844 17.3412 50.7844 17.3912C50.7844 17.4546 50.794 17.5162 50.8037 17.5758C50.794 17.6373 50.7844 17.6969 50.7844 17.7642C50.7844 20.8795 50.7382 23.9968 50.8672 27.1102C50.9943 30.2024 51.2562 33.285 51.6125 36.358C51.7454 37.5022 51.8012 38.7118 52.1247 39.8234C52.4887 41.0695 53.2416 42.4348 54.2815 43.2271C55.5718 44.2117 57.5148 44.4271 58.8802 43.4598C60.1338 42.5714 60.7828 41.0464 61.1237 39.5945C61.8632 36.4388 61.4222 33.1793 61.6975 29.9813C61.7495 29.3794 61.1449 28.8621 60.5768 28.8621C59.9278 28.8621 59.508 29.3755 59.456 29.9813C59.2345 32.5524 59.481 35.1427 59.1902 37.7119C59.0631 38.8272 58.7724 40.0637 58.1831 40.9964C57.5919 41.931 56.5212 42.1252 55.6411 41.4675C55.1886 41.131 54.9113 40.606 54.6609 40.0983C54.5974 39.9695 54.5357 39.8368 54.4741 39.7061C54.4337 39.6195 54.3952 39.5311 54.3547 39.4426C54.3509 39.433 54.3432 39.4118 54.3335 39.3887C54.3239 39.3618 54.3162 39.3349 54.3124 39.3234C54.2873 39.233 54.2584 39.1426 54.2373 39.0503C54.193 38.8695 54.1583 38.6868 54.1275 38.5042C54.1082 38.3869 54.089 38.2695 54.0716 38.1542C54.0639 38.1003 54.0562 38.0484 54.0485 37.9945C54.0601 38.0811 54.0543 38.0426 54.0485 37.9945C54.0466 37.9753 54.0428 37.9561 54.0408 37.9407C53.9542 37.2715 53.8791 36.6003 53.802 35.9292C53.4727 33.11 53.2455 30.2793 53.1203 27.4429C52.9894 24.4872 53.0163 21.5276 53.0221 18.57C55.5005 18.7007 57.979 18.8488 60.4574 18.9719V18.9738ZM53.2243 11.7047C53.4824 10.1086 53.9619 8.51059 54.9401 7.19908C55.3003 6.7164 55.8067 6.16255 56.4364 6.09717C56.9583 6.04333 57.6593 6.54909 57.9019 6.91062C58.3352 7.55099 58.5374 8.4625 58.7473 9.1971C58.9938 10.0509 59.1806 10.9221 59.3173 11.8009C59.5638 13.4086 59.5985 15.0566 59.4733 16.6816C57.3261 16.57 55.1789 16.447 53.0317 16.3335C53.0414 14.7854 52.974 13.2412 53.2224 11.7028L53.2243 11.7047Z'
              fill='#111827'
            />
            <path
              d='M71.7673 36.7562C70.3962 36.8716 69.0174 36.8754 67.6462 36.7562C67.3477 36.7293 67.0512 36.7004 66.7546 36.66C66.6853 36.6504 66.2732 36.5466 66.0594 36.5197C66.0402 36.3273 66.0479 35.9851 66.0402 35.7543C65.9785 33.8332 66.0883 31.9082 66.0883 29.9871C66.0883 24.693 65.9516 19.3989 65.8264 14.1067L65.6011 4.60689C65.5664 3.17038 63.3268 3.16461 63.3615 4.60689C63.5021 10.5029 63.6908 16.4028 63.7736 22.3007C63.8102 24.8911 63.8468 27.4852 63.8468 30.0756C63.8468 32.1928 63.7177 34.312 63.8275 36.4273C63.866 37.1773 64.0663 38.0081 64.7576 38.4331C65.3854 38.8177 66.2212 38.8369 66.9299 38.9215C68.534 39.1119 70.1535 39.1311 71.7635 38.9965C72.3662 38.9465 72.8842 38.5196 72.8842 37.8773C72.8842 37.3119 72.3701 36.7081 71.7635 36.7581L71.7673 36.7562ZM66.1153 36.7062C66.1307 36.7254 66.1422 36.7389 66.1422 36.7389C66.1345 36.7466 66.1249 36.7312 66.1153 36.7062Z'
              fill='#111827'
            />
            <path
              d='M81.6984 41.7041C79.8805 41.9406 78.0318 41.931 76.21 41.7233C75.9943 32.1562 75.7806 22.591 75.5649 13.0239C75.5014 10.1855 75.4378 7.34714 75.3743 4.50874C75.3415 3.07224 73.1019 3.06647 73.1346 4.50874C73.358 14.422 73.5795 24.3352 73.8029 34.2485C73.8664 37.0657 73.93 39.881 73.9935 42.6983C74.0031 43.1387 74.3305 43.706 74.8158 43.7771C77.1016 44.1098 79.401 44.2406 81.6984 43.9406C82.2973 43.8617 82.8191 43.4829 82.8191 42.8214C82.8191 42.2771 82.303 41.6252 81.6984 41.7022V41.7041Z'
              fill='#111827'
            />
            <path
              d='M84.8796 15.872C84.9393 15.8143 84.999 15.7567 85.0625 15.7009C85.0606 15.7028 85.1415 15.6394 85.1877 15.599C85.2262 15.5855 85.3495 15.5259 85.3572 15.5124C85.5517 15.4624 85.7346 15.4778 85.9985 15.5567C86.6301 15.7451 87.1558 16.199 87.6045 16.6816C87.9492 17.0528 88.2573 17.5932 88.4056 18.0547C88.6444 18.8047 88.6791 19.322 88.6791 20.1316C88.6791 21.57 90.9187 21.5738 90.9187 20.1316C90.9187 18.6893 90.7011 17.3509 89.9886 16.1528C89.2703 14.949 88.059 13.9067 86.7322 13.4432C85.9484 13.1702 85.0722 13.1702 84.3192 13.524C83.7627 13.7855 83.2504 14.2798 82.846 14.7374C81.8601 15.8509 81.109 17.4143 81.2207 18.922C81.342 20.5508 82.0642 22.0546 83.0944 23.3046C83.5971 23.9161 84.2017 24.4372 84.8507 24.8872C85.1954 25.1257 85.5575 25.3353 85.9137 25.5564C86.089 25.6641 86.2623 25.7737 86.4337 25.8872C86.5839 25.9872 86.7899 26.1353 86.84 26.1757C87.3407 26.5987 87.7509 27.0891 88.0725 27.6583C88.2342 27.9429 88.3344 28.1641 88.4229 28.4756C88.4461 28.5602 88.4692 28.6468 88.4865 28.7333C88.4865 28.7391 88.4981 28.8333 88.5019 28.8564C88.5058 28.9083 88.5077 28.9583 88.5077 29.0102C88.5077 29.041 88.5 29.1794 88.5038 29.191C88.4152 29.7352 88.0224 30.2313 87.6546 30.6179C87.5698 30.7083 87.4813 30.7967 87.3888 30.8813C87.3542 30.914 87.2097 31.0275 87.2097 31.0332C86.9459 31.2102 86.711 31.3121 86.3778 31.3755C85.1376 31.6063 83.9379 30.7275 83.3409 29.7467C82.6458 28.5987 82.5225 27.3526 83.0405 26.0872C83.2697 25.5276 82.7921 24.8584 82.2587 24.7122C81.6174 24.5353 81.1109 24.9314 80.8818 25.493C79.7937 28.1468 81.007 31.4755 83.4488 32.9274C84.8546 33.764 86.7013 33.9063 88.1476 33.0871C89.303 32.4332 90.4161 31.0544 90.6703 29.7467C90.9822 28.1372 90.1831 26.5776 89.1817 25.3699C88.1553 24.1334 86.6455 23.6007 85.4746 22.5546C84.4559 21.645 83.6645 20.3969 83.4738 19.0547C83.3929 18.4893 83.4854 17.9739 83.6933 17.5393C83.9938 16.9124 84.3847 16.3509 84.8835 15.872H84.8796Z'
              fill='#111827'
            />
            <path
              d='M96.7747 34.7159C96.2759 34.0909 95.7791 33.4621 95.2841 32.8332C95.2784 32.8275 95.2399 32.7775 95.1936 32.7178C95.2033 32.7005 95.2129 32.6832 95.2206 32.6678C95.4286 32.3505 95.6423 32.0371 95.86 31.7275C96.7073 30.5198 97.6335 29.3699 98.6253 28.2776C99.773 27.0141 101.007 25.8334 102.315 24.7353C102.779 24.3469 102.717 23.5546 102.315 23.1546C101.857 22.6969 101.196 22.7642 100.732 23.1546C98.3749 25.1334 96.2759 27.3968 94.4522 29.8737C94.3251 24.3527 94.0363 18.8316 93.9323 13.3125C93.8784 10.4953 93.8784 7.67609 93.9689 4.85884C94.0151 3.41849 91.7755 3.42041 91.7293 4.85884C91.4038 14.9105 92.2954 24.9488 92.2762 34.9986C92.2704 37.8139 92.1914 40.6292 91.9969 43.4388C91.9546 44.0426 92.5419 44.558 93.1177 44.558C93.759 44.558 94.1961 44.0445 94.2385 43.4388C94.4233 40.7715 94.4985 38.1023 94.5119 35.4351C95.5152 36.7024 96.5263 37.962 97.5661 39.1985C98.8256 40.6927 100.127 42.1503 101.51 43.533C102.531 44.5522 104.114 42.9715 103.093 41.9523C100.826 39.685 98.7736 37.2178 96.7747 34.7159Z'
              fill='#111827'
            />
            <path
              d='M112.985 13.3641C113.003 12.343 113.007 11.3219 112.985 10.2988C112.966 9.26999 112.974 8.20462 112.735 7.19695C112.336 5.5143 110.981 4.27009 109.269 4.00664C107.484 3.73356 105.851 4.42009 104.776 5.86237C104.212 6.61812 103.865 7.51425 103.551 8.39693C103.222 9.32575 102.906 10.2565 102.677 11.2161C102.138 13.4757 101.932 15.8179 101.926 18.1371C101.922 19.5755 104.162 19.5794 104.166 18.1371C104.169 16.2852 104.297 14.4314 104.66 12.6141C104.963 11.1007 105.427 9.46229 106.061 8.09693C106.342 7.49118 106.675 6.91426 107.176 6.56427C107.667 6.22005 108.088 6.15275 108.678 6.17582C108.691 6.17582 108.774 6.18544 108.822 6.18929C108.868 6.1989 108.949 6.21235 108.963 6.2162C109.095 6.24697 109.228 6.28158 109.357 6.32581C109.388 6.33543 109.409 6.34312 109.429 6.35081C109.494 6.37966 109.56 6.41428 109.621 6.44889C109.81 6.55274 109.879 6.60081 109.958 6.67196C110.203 6.89118 110.235 6.91041 110.393 7.23733C110.549 7.56232 110.623 7.93539 110.663 8.29308C110.869 10.1642 110.775 12.1045 110.734 13.9833C110.694 15.9083 110.615 17.8333 110.563 19.7601C110.511 21.6889 110.488 23.6158 110.559 25.5446C110.576 26.0254 110.582 26.5042 110.582 26.985C110.185 26.7888 109.768 26.635 109.344 26.5273C108.271 26.2542 106.975 26.1523 105.899 26.4638C103.611 27.1254 102.336 29.7676 101.862 31.9079C101.354 34.2079 101.346 36.5925 102.219 38.8078C102.673 39.9616 103.262 41.0039 104.316 41.7097C105.057 42.2058 106.014 42.4346 106.904 42.3769C108.163 42.2962 109.405 41.8077 110.467 41.0654C110.459 41.6693 110.453 42.2731 110.442 42.875C110.415 44.3154 112.654 44.3154 112.681 42.875C112.708 41.4231 112.722 39.9712 112.733 38.5193C112.779 38.3443 112.779 38.177 112.737 38.0232C112.749 36.0348 112.75 34.0483 112.752 32.0599C112.752 29.9464 112.88 27.8369 112.804 25.7254C112.731 23.6774 112.751 21.6312 112.808 19.5832C112.866 17.5102 112.953 15.4391 112.987 13.366L112.985 13.3641ZM109.463 6.36235C109.496 6.37389 109.484 6.37004 109.463 6.36235ZM110.513 31.4214C110.505 33.5983 110.503 35.7732 110.494 37.9501C109.737 39.0097 108.508 39.8039 107.253 40.0828C107.162 40.1039 107.07 40.1212 106.979 40.1347C106.969 40.1347 106.968 40.1366 106.96 40.1385C106.942 40.1385 106.931 40.1385 106.904 40.1385C106.769 40.1385 106.638 40.1481 106.503 40.1385C106.476 40.1385 106.357 40.1251 106.28 40.1193C106.234 40.1097 106.18 40.1001 106.172 40.0981C106.041 40.0578 105.906 40.0251 105.781 39.9712C105.19 39.7116 104.793 39.127 104.493 38.477C103.748 36.8636 103.617 35.1098 103.861 33.3791C104.085 31.806 104.618 29.933 105.941 28.9119C106.632 28.3792 107.726 28.4657 108.475 28.6196C109.317 28.7926 109.979 29.108 110.538 29.7253C110.526 30.2907 110.515 30.856 110.513 31.4233V31.4214Z'
              fill='#111827'
            />
            <path
              d='M19.5279 47.9923C23.0943 47.9923 25.1067 46.5116 26.2121 45.1001C28.159 42.6155 28.3843 38.9444 27.6237 35.8214C29.0352 36.5176 30.8801 37.3791 32.7769 37.9791C35.7965 38.9329 38.0303 38.929 39.6075 37.9694C41.0768 37.0752 41.8336 35.4368 41.8587 33.1003C41.8953 29.635 39.5362 28.46 37.7241 27.9389C40.709 26.7678 45.5099 24.8236 46.5806 21.2467C47.1044 19.4949 46.673 17.6237 45.2961 15.6834C44.3429 14.3392 43.1181 13.5873 41.6545 13.4488C39.0221 13.2008 36.1758 15.0546 33.8149 17.0468C35.0493 14.4469 36.0083 11.2296 35.1706 8.10472C34.4253 5.32401 32.3802 3.03753 29.0949 1.30872C26.2198 -0.204709 23.7452 -0.406627 21.7405 0.708733C19.7513 1.81448 18.3628 4.11058 17.4962 7.72781C16.8184 10.5585 16.6008 13.6777 16.4563 15.743C16.4236 16.2045 16.3909 16.6968 16.3543 17.1084C15.817 16.8411 15.1218 16.4603 14.5133 16.1295C10.8871 14.1527 5.91873 11.447 2.89918 12.6162C1.91321 12.9988 1.19683 13.7661 0.829018 14.8353C-0.364936 18.3064 -0.268641 21.164 1.11403 23.3294C3.55394 27.1447 9.35424 27.7447 12.8206 28.1043C13.3521 28.16 13.9567 28.2216 14.4305 28.2908C14.2649 28.6639 14.053 29.1196 13.8547 29.5446C13.0112 31.3523 11.8538 33.8292 11.1278 36.4137C10.2073 39.6906 10.2362 42.2232 11.2164 44.1578C12.1427 45.9847 13.8778 47.1654 16.3755 47.6635C17.5405 47.8962 18.5881 48 19.526 48L19.5279 47.9923ZM25.7576 32.6349C25.4957 32.6349 25.2203 32.7157 24.9719 32.9561C24.6195 33.3003 24.5309 33.8176 24.7466 34.2734C26.0484 37.0252 26.3912 41.2771 24.4655 43.7347C22.9903 45.6174 20.4156 46.2077 16.8107 45.4866C14.9889 45.1231 13.8046 44.3578 13.1941 43.1501C11.5014 39.8098 14.338 33.7349 15.8632 30.4715C16.1964 29.76 16.4833 29.1466 16.6643 28.685C16.8396 28.2408 17.2517 27.2024 16.4178 26.612C15.8382 26.2005 14.9158 26.0909 13.0516 25.8966C9.7856 25.5582 4.84802 25.0486 2.98391 22.1313C1.98253 20.5641 1.96328 18.3487 2.92614 15.5469C3.12835 14.9603 3.44801 14.77 3.70221 14.6719C5.76274 13.8738 10.7658 16.6007 13.4541 18.0641C14.3188 18.5353 15.064 18.941 15.6533 19.2179C16.2407 19.4949 17.1265 19.9122 17.8313 19.4179C18.4533 18.9833 18.5015 18.266 18.6671 15.8872C18.9232 12.1912 19.4586 4.50287 22.819 2.63368C24.1285 1.90485 25.8924 2.11639 28.0627 3.25675C30.7799 4.68557 32.4515 6.50667 33.0311 8.66817C34.1346 12.7815 31.2556 17.3411 29.7092 19.791C28.8292 21.1852 28.4267 21.8217 28.8658 22.5525C29.0506 22.8602 29.3626 23.064 29.7208 23.1121C30.4545 23.2102 30.9147 22.7679 32.438 21.3025C34.5929 19.2314 38.6042 15.3738 41.4466 15.643C42.2477 15.718 42.9159 16.1469 43.4878 16.9526C44.4642 18.3276 44.78 19.5237 44.4565 20.6044C43.6746 23.2198 39.334 24.9217 36.7401 25.9389C36.0873 26.1947 35.523 26.4159 35.1032 26.6159C34.7065 26.8043 33.8842 27.1966 33.8573 28.0466C33.8476 28.3504 33.9343 29.0985 34.9414 29.4966C35.2707 29.6273 35.6578 29.7119 36.1084 29.8119C38.194 30.2715 39.6672 30.7735 39.6421 33.0696C39.6248 34.6138 39.2358 35.5983 38.452 36.0753C37.4815 36.6656 35.7502 36.5945 33.4432 35.8656C31.3134 35.1926 29.1874 34.1291 27.7816 33.4253C27.3175 33.1926 26.9497 33.008 26.6646 32.8811C26.4567 32.7869 26.1197 32.6349 25.7576 32.6349Z'
              fill='#111827'
            />
            <path
              d='M23.8415 30.3697C23.9474 30.3697 24.0475 30.3639 24.138 30.3543C25.538 30.2005 26.7666 28.9217 27.1267 27.2486C27.5138 25.4467 26.8013 23.7641 25.2626 22.8564C25.0104 22.7064 24.1977 22.3257 23.3003 22.0968C21.9196 21.7449 20.8681 21.8834 20.1749 22.5083C18.6709 23.8641 19.8918 26.5063 20.2923 27.3756C21.4593 29.9024 22.919 30.3716 23.8415 30.3716V30.3697ZM24.1361 24.7602C25.1452 25.3564 25.0489 26.3736 24.9603 26.7833C24.7889 27.5775 24.2728 28.114 23.8934 28.1563C23.5256 28.1967 22.9132 27.7698 22.3028 26.4486C21.5691 24.8602 21.6442 24.266 21.675 24.1449C22.0775 23.9795 23.5353 24.4141 24.1361 24.7602Z'
              fill='#111827'
            />
          </svg>
        </div>
      </div>
    ),
    {
      fonts: [
        {
          name: 'outfit',
          data: await getOutfitRegularFont(),
          style: 'normal',
          weight: 400,
        },
        {
          name: 'outfit',
          data: await getOutfitBoldFont(),
          style: 'normal',
          weight: 700,
        },
      ],
    },
  )
}
